<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE mapper PUBLIC 
    "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="admin_mapper">

	<select id="findUserList"
		resultType="com.app.dto.admin.UserList">
		SELECT user_code AS userCode,
		user_name AS userName,
		user_email AS userEmail,
		user_nickname AS userNickname
		FROM USER_INFO
	</select>

	<select id="findUserByCode" parameterType="int"
		resultType="com.app.dto.admin.UserList">
		SELECT user_code AS userCode,
		user_type AS userType,
		user_email AS userEmail,
		user_pw AS userPw,
		user_nickname AS userNickname,
		user_name AS userName,
		user_rsd_reg_num AS userRsdRegNum,
		user_phone_num AS userPhoneNum,
		user_addr AS userAddr,
		user_reg_dt AS userRegDt,
		user_status AS userStatus
		FROM USER_INFO
		WHERE user_code = #{userCode}
	</select>

	<update id="updateUser"
		parameterType="com.app.dto.admin.UserList">
		UPDATE USER_INFO
		SET user_name = #{userName},
		user_email = #{userEmail},
		user_nickname = #{userNickname},
		user_phone_num = #{userPhoneNum},
		user_addr = #{userAddr}
		WHERE user_code = #{userCode}
	</update>

	<!-- 리뷰 신고 목록 조회 -->
	<select id="findAllReviewReports"
		resultType="com.app.dto.admin.ReviewReport">
		SELECT review_code AS reviewCode,
		user_code AS userCode,
		report_reason AS reportReason,
		review_text AS reviewText,
		review_date AS reviewDate
		FROM USER_REVIEW
		WHERE report_status = '1'
	</select>

	<!-- 리뷰 신고 상태 업데이트 -->
	<update id="updateReviewReportStatus">
		UPDATE USER_REVIEW
		SET report_status = '2'
		WHERE review_code = #{reviewCode}
	</update>
	
	<update id="updateReviewReportStatusToZero">
    UPDATE USER_REVIEW
    SET report_status = '0'
    WHERE review_code = #{reviewCode}
</update>

</mapper>
